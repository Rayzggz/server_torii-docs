"use strict";(self.webpackChunkserver_torii=self.webpackChunkserver_torii||[]).push([[2],{6826:(e,i,n)=>{n.r(i),n.d(i,{comp:()=>t,data:()=>l});var s=n(641);const a={},t=(0,n(6262).A)(a,[["render",function(e,i){return(0,s.uX)(),(0,s.CE)("div",null,i[0]||(i[0]=[(0,s.Fv)('<h1 id="installation" tabindex="-1"><a class="header-anchor" href="#installation"><span>Installation</span></a></h1><div class="hint-container warning"><p class="hint-container-title">Warning</p><p>Server Torii is currently actively adding new features and improving some existing features. It&#39;s ready to be used to protect your site, but during version updates, there may be some breaking changes. Therefore, Make sure to read the Upgrade Guide when updating.</p></div><p>The installation contain two parts: ngx_torii and server_torii.</p><p>ngx_torii is an Nginx module that serves as a connector for server_torii, forwarding requests from Nginx to server_torii.</p><h2 id="install-server-torii" tabindex="-1"><a class="header-anchor" href="#install-server-torii"><span>Install server_torii</span></a></h2><ol><li>Create a working directory You may choose any directory you prefer:</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /www/server_torii</span>\n<span class="line"><span class="token builtin class-name">cd</span> /www/server_torii</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>2.Clone the repository</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">git</span> clone https://github.com/Rayzggz/server_torii.git</span>\n<span class="line"><span class="token builtin class-name">cd</span> server_torii</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Configuration</li></ol><p>Edit the configuration file according to the Configuration Guide.</p><p><a href="/guide/configuration.html#basic-quick-setup" target="_blank" rel="noopener noreferrer">Basic Quick Setup</a></p><ol start="4"><li>Build and install</li></ol><p>The Makefile provides an install target which:</p><ul><li>Compiles the binary in the current directory</li><li>Places the executable in this directory</li><li>Registers server_torii as a system service</li><li>Starts the service immediately</li><li>Adds it to the system startup sequence</li></ul><p>To compile and install:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">make</span> <span class="token function">install</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>If you prefer to run it differently, you can compile and execute it like any standard Go application.</p><h2 id="compiling-and-installing-ngx-torii" tabindex="-1"><a class="header-anchor" href="#compiling-and-installing-ngx-torii"><span>Compiling and Installing ngx_torii</span></a></h2><div class="hint-container tip"><p class="hint-container-title">How to get Nginx compile arguments</p><p>You need to get the compile arguments of Nginx by running <code>nginx -V</code> Example：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line"># nginx -V</span>\n<span class="line"></span>\n<span class="line">nginx version: nginx/1.21.4</span>\n<span class="line">built by gcc 13.3.0 (Ubuntu 13.3.0-6ubuntu2~24.04) </span>\n<span class="line">built with OpenSSL 1.1.1w  11 Sep 2023</span>\n<span class="line">TLS SNI support enabled</span>\n<span class="line">configure arguments: --user=www --group=www --prefix=/www/server/nginx --add-module=/www/server/nginx/src/ngx_devel_kit --add-module=/www/server/nginx/src/lua_nginx_module --add-module=/www/server/nginx/src/ngx_cache_purge --add-module=/www/server/nginx/src/nginx-sticky-module --with-openssl=/www/server/nginx/src/openssl --with-pcre=pcre-8.43 --with-http_v2_module --with-stream --with-stream_ssl_module --with-stream_ssl_preread_module --with-http_stub_status_module --with-http_ssl_module --with-http_image_filter_module --with-http_gzip_static_module --with-http_gunzip_module --with-ipv6 --with-http_sub_module --with-http_flv_module --with-http_addition_module --with-http_realip_module --with-http_mp4_module --with-http_auth_request_module --add-module=/www/server/nginx/src/ngx_http_substitutions_filter_module-master --with-ld-opt=-Wl,-E --with-cc-opt=-Wno-error --with-ld-opt=-ljemalloc --with-http_dav_module --add-module=/www/server/nginx/src/nginx-dav-ext-module```</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Use the <code>configure arguments:</code> part of the output, which will be referred to as <code>ARG</code> in the following sections.</p></div><p>ngx_torii Repo URL: <code>https://github.com/Rayzggz/ngx_torii</code> This Module is a simple modification of the built-in Nginx module ngx_http_auth_request_module to support server_torii</p><p>Use <code>git clone https://github.com/Rayzggz/ngx_torii</code> to clone the repository.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">$ <span class="token builtin class-name">cd</span> nginx-1.x.x</span>\n<span class="line">$ ./configure ARG --add-module<span class="token operator">=</span>/path/to/ngx_torii</span>\n<span class="line">$ <span class="token function">make</span></span>\n<span class="line">$ <span class="token function">make</span> <span class="token function">install</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="installing-ngx-torii-via-the-aapanel" tabindex="-1"><a class="header-anchor" href="#installing-ngx-torii-via-the-aapanel"><span>Installing ngx_torii via the aaPanel</span></a></h2><div class="hint-container caution"><p class="hint-container-title">Warning</p><p>Installing via the aaPanel “App store” may incur significant service downtime. If minimal disruption is critical and your Nginx was originally compiled from source, you are advised to follow the manual compilation method above.</p><p>FYR: aaPanel Nginx compile path <code>/www/server/nginx/src/</code> After compilation, use the compiled executable file <code>/www/server/nginx/src/objs/nginx</code> to replace the Baota Nginx file in <code>/www/server/nginx/sbin/</code>, and then restart Nginx.</p></div><ol><li>Uninstall the Nginx in App store</li><li>Reinstall Nginx, choose the 「Compiled」</li><li>Click 「Adding custom modules」</li></ol><ul><li>Name： <code>ngx_torii</code></li><li>Description： <code>Server Torii Nginx Module</code></li><li>Parameter： <code>--add-module=/www/server/nginx/src/ngx_torii</code></li><li>Prefix script</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /www/server/nginx/src</span>\n<span class="line"><span class="token builtin class-name">cd</span> /www/server/nginx/src</span>\n<span class="line"><span class="token function">git</span> clone https://github.com/Rayzggz/ngx_torii</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>Confirm and Install</li></ol>',29)]))}]]),l=JSON.parse('{"path":"/guide/install.html","title":"Installation","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"Install server_torii","slug":"install-server-torii","link":"#install-server-torii","children":[]},{"level":2,"title":"Compiling and Installing ngx_torii","slug":"compiling-and-installing-ngx-torii","link":"#compiling-and-installing-ngx-torii","children":[]},{"level":2,"title":"Installing ngx_torii via the aaPanel","slug":"installing-ngx-torii-via-the-aapanel","link":"#installing-ngx-torii-via-the-aapanel","children":[]}],"git":{"updatedTime":1746558662000,"contributors":[{"name":"Rayzggz","username":"Rayzggz","email":"37480123+Rayzggz@users.noreply.github.com","commits":3,"url":"https://github.com/Rayzggz"}],"changelog":[{"hash":"bac19908e6c1afc3a19dcf7db6667003606db5d2","time":1746558662000,"email":"37480123+Rayzggz@users.noreply.github.com","author":"Roi Feng","message":"docs: Add install warning"},{"hash":"1e3c9056f768a108e300d8d259bbc580c9f73193","time":1746411092000,"email":"37480123+Rayzggz@users.noreply.github.com","author":"Roi Feng","message":"docs: add link to config"},{"hash":"18f22f10d2875bd5573e982ce2de0b99c5a71d8e","time":1746406274000,"email":"37480123+Rayzggz@users.noreply.github.com","author":"Roi Feng","message":"docs: en install.md"}]},"filePathRelative":"guide/install.md"}')}}]);